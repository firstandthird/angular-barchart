/*!
 * angular-barchart - An angular directive for bar chart creation
 * v0.1.0
 * https://github.com/firstandthird/angular-barchart
 * copyright  2015
 * MIT License
*/angular.module("ftBarChart",[]).directive("barChart",function(a,b){return{restrict:"A",scope:{ngModel:"=",objectKey:"@?barchartValueKey"},link:function(a,c,d){var e=!1;if(angular.isObject(a.ngModel[0])){if(!angular.isDefined(d.barchartValueKey))throw new Error("You must define a barchart-value-key to extract the value from the dict!");e=!0}var f=function(a,b,c){return 100*(c-b)/(a-b)||0},g=function(a){var d,e=Math.max.apply(null,a),g=Math.min.apply(null,a),h=0,l=0,m=a.length;c.html("");for(var n=[];m>h;h++)n.push(f(e,g,a[h]));var o,p,q,r=100/n.length,s=angular.element('<svg width="'+j+'" height="'+i+'"/>');for(d=n.length;d>l;l++){var t=b[0].createElementNS("http://www.w3.org/2000/svg","rect");o=100*(l/n.length),p=100-n[l],q=n[l]+1,t.setAttribute("title",a[l]),t.setAttribute("x",o+"%"),t.setAttribute("y",p+"%"),t.setAttribute("width",r+"%"),t.setAttribute("height",q+"%"),t.setAttribute("fill",k),s.append(t)}c.append(s)},h=function(b){var c=b;return e&&(c=b.map(function(b){return b[a.objectKey]})),c},i=d.chartHeight?d.chartHeight:90,j=d.chartWidth?d.chartWidth:400,k=d.chartColor?d.chartColor:"#000";a.$watch("ngModel",function(a){g(h(a))},e)}}});